<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qingyun.mybatis.dao.MbProductMapper">
  <resultMap id="BaseResultMap" type="com.qingyun.mybatis.model.MbProduct">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ProductId" jdbcType="BIGINT" property="productid" />
    <result column="ProductTitle" jdbcType="VARCHAR" property="producttitle" />
    <result column="ProductState" jdbcType="INTEGER" property="productstate" />
    <result column="ProductSort" jdbcType="INTEGER" property="productsort" />
    <result column="ProductPic" jdbcType="VARCHAR" property="productpic" />
    <result column="CreationTime" jdbcType="TIMESTAMP" property="creationtime" />
    <result column="ProductRemarks" jdbcType="VARCHAR" property="productremarks" />
    <result column="IsDel" jdbcType="SMALLINT" property="isdel" />
    <result column="category_id" jdbcType="BIGINT" property="categoryId" />
    <result column="key_word" jdbcType="VARCHAR" property="keyWord" />
    <result column="description" jdbcType="VARCHAR" property="description" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.qingyun.mybatis.model.MbProduct">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="ProductContext" jdbcType="LONGVARCHAR" property="productcontext" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ProductId, ProductTitle, ProductState, ProductSort, ProductPic, CreationTime, ProductRemarks, 
    IsDel, category_id, key_word, description
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ProductContext
  </sql>
  <select id="selectByExampleWithBLOBs" parameterType="com.qingyun.mybatis.model.MbProductExample" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from mb_product
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" parameterType="com.qingyun.mybatis.model.MbProductExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from mb_product
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from mb_product
    where ProductId = #{productid,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from mb_product
    where ProductId = #{productid,jdbcType=BIGINT}
  </delete>
  <delete id="deleteByExample" parameterType="com.qingyun.mybatis.model.MbProductExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from mb_product
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.qingyun.mybatis.model.MbProduct">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into mb_product (ProductId, ProductTitle, ProductState, 
      ProductSort, ProductPic, CreationTime, 
      ProductRemarks, IsDel, category_id, 
      key_word, description, ProductContext
      )
    values (#{productid,jdbcType=BIGINT}, #{producttitle,jdbcType=VARCHAR}, #{productstate,jdbcType=INTEGER}, 
      #{productsort,jdbcType=INTEGER}, #{productpic,jdbcType=VARCHAR}, #{creationtime,jdbcType=TIMESTAMP}, 
      #{productremarks,jdbcType=VARCHAR}, #{isdel,jdbcType=SMALLINT}, #{categoryId,jdbcType=BIGINT}, 
      #{keyWord,jdbcType=VARCHAR}, #{description,jdbcType=VARCHAR}, #{productcontext,jdbcType=LONGVARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.qingyun.mybatis.model.MbProduct" useGeneratedKeys="true" keyProperty="productid">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into mb_product
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="productid != null">
        ProductId,
      </if>
      <if test="producttitle != null">
        ProductTitle,
      </if>
      <if test="productstate != null">
        ProductState,
      </if>
      <if test="productsort != null">
        ProductSort,
      </if>
      <if test="productpic != null">
        ProductPic,
      </if>
      <if test="creationtime != null">
        CreationTime,
      </if>
      <if test="productremarks != null">
        ProductRemarks,
      </if>
      <if test="isdel != null">
        IsDel,
      </if>
      <if test="categoryId != null">
        category_id,
      </if>
      <if test="keyWord != null">
        key_word,
      </if>
      <if test="description != null">
        description,
      </if>
      <if test="productcontext != null">
        ProductContext,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="productid != null">
        #{productid,jdbcType=BIGINT},
      </if>
      <if test="producttitle != null">
        #{producttitle,jdbcType=VARCHAR},
      </if>
      <if test="productstate != null">
        #{productstate,jdbcType=INTEGER},
      </if>
      <if test="productsort != null">
        #{productsort,jdbcType=INTEGER},
      </if>
      <if test="productpic != null">
        #{productpic,jdbcType=VARCHAR},
      </if>
      <if test="creationtime != null">
        #{creationtime,jdbcType=TIMESTAMP},
      </if>
      <if test="productremarks != null">
        #{productremarks,jdbcType=VARCHAR},
      </if>
      <if test="isdel != null">
        #{isdel,jdbcType=SMALLINT},
      </if>
      <if test="categoryId != null">
        #{categoryId,jdbcType=BIGINT},
      </if>
      <if test="keyWord != null">
        #{keyWord,jdbcType=VARCHAR},
      </if>
      <if test="description != null">
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="productcontext != null">
        #{productcontext,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.qingyun.mybatis.model.MbProductExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from mb_product
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mb_product
    <set>
      <if test="record.productid != null">
        ProductId = #{record.productid,jdbcType=BIGINT},
      </if>
      <if test="record.producttitle != null">
        ProductTitle = #{record.producttitle,jdbcType=VARCHAR},
      </if>
      <if test="record.productstate != null">
        ProductState = #{record.productstate,jdbcType=INTEGER},
      </if>
      <if test="record.productsort != null">
        ProductSort = #{record.productsort,jdbcType=INTEGER},
      </if>
      <if test="record.productpic != null">
        ProductPic = #{record.productpic,jdbcType=VARCHAR},
      </if>
      <if test="record.creationtime != null">
        CreationTime = #{record.creationtime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.productremarks != null">
        ProductRemarks = #{record.productremarks,jdbcType=VARCHAR},
      </if>
      <if test="record.isdel != null">
        IsDel = #{record.isdel,jdbcType=SMALLINT},
      </if>
      <if test="record.categoryId != null">
        category_id = #{record.categoryId,jdbcType=BIGINT},
      </if>
      <if test="record.keyWord != null">
        key_word = #{record.keyWord,jdbcType=VARCHAR},
      </if>
      <if test="record.description != null">
        description = #{record.description,jdbcType=VARCHAR},
      </if>
      <if test="record.productcontext != null">
        ProductContext = #{record.productcontext,jdbcType=LONGVARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mb_product
    set ProductId = #{record.productid,jdbcType=BIGINT},
      ProductTitle = #{record.producttitle,jdbcType=VARCHAR},
      ProductState = #{record.productstate,jdbcType=INTEGER},
      ProductSort = #{record.productsort,jdbcType=INTEGER},
      ProductPic = #{record.productpic,jdbcType=VARCHAR},
      CreationTime = #{record.creationtime,jdbcType=TIMESTAMP},
      ProductRemarks = #{record.productremarks,jdbcType=VARCHAR},
      IsDel = #{record.isdel,jdbcType=SMALLINT},
      category_id = #{record.categoryId,jdbcType=BIGINT},
      key_word = #{record.keyWord,jdbcType=VARCHAR},
      description = #{record.description,jdbcType=VARCHAR},
      ProductContext = #{record.productcontext,jdbcType=LONGVARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mb_product
    set ProductId = #{record.productid,jdbcType=BIGINT},
      ProductTitle = #{record.producttitle,jdbcType=VARCHAR},
      ProductState = #{record.productstate,jdbcType=INTEGER},
      ProductSort = #{record.productsort,jdbcType=INTEGER},
      ProductPic = #{record.productpic,jdbcType=VARCHAR},
      CreationTime = #{record.creationtime,jdbcType=TIMESTAMP},
      ProductRemarks = #{record.productremarks,jdbcType=VARCHAR},
      IsDel = #{record.isdel,jdbcType=SMALLINT},
      category_id = #{record.categoryId,jdbcType=BIGINT},
      key_word = #{record.keyWord,jdbcType=VARCHAR},
      description = #{record.description,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.qingyun.mybatis.model.MbProduct">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mb_product
    <set>
      <if test="producttitle != null">
        ProductTitle = #{producttitle,jdbcType=VARCHAR},
      </if>
      <if test="productstate != null">
        ProductState = #{productstate,jdbcType=INTEGER},
      </if>
      <if test="productsort != null">
        ProductSort = #{productsort,jdbcType=INTEGER},
      </if>
      <if test="productpic != null">
        ProductPic = #{productpic,jdbcType=VARCHAR},
      </if>
      <if test="creationtime != null">
        CreationTime = #{creationtime,jdbcType=TIMESTAMP},
      </if>
      <if test="productremarks != null">
        ProductRemarks = #{productremarks,jdbcType=VARCHAR},
      </if>
      <if test="isdel != null">
        IsDel = #{isdel,jdbcType=SMALLINT},
      </if>
      <if test="categoryId != null">
        category_id = #{categoryId,jdbcType=BIGINT},
      </if>
      <if test="keyWord != null">
        key_word = #{keyWord,jdbcType=VARCHAR},
      </if>
      <if test="description != null">
        description = #{description,jdbcType=VARCHAR},
      </if>
      <if test="productcontext != null">
        ProductContext = #{productcontext,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where ProductId = #{productid,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.qingyun.mybatis.model.MbProduct">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mb_product
    set ProductTitle = #{producttitle,jdbcType=VARCHAR},
      ProductState = #{productstate,jdbcType=INTEGER},
      ProductSort = #{productsort,jdbcType=INTEGER},
      ProductPic = #{productpic,jdbcType=VARCHAR},
      CreationTime = #{creationtime,jdbcType=TIMESTAMP},
      ProductRemarks = #{productremarks,jdbcType=VARCHAR},
      IsDel = #{isdel,jdbcType=SMALLINT},
      category_id = #{categoryId,jdbcType=BIGINT},
      key_word = #{keyWord,jdbcType=VARCHAR},
      description = #{description,jdbcType=VARCHAR},
      ProductContext = #{productcontext,jdbcType=LONGVARCHAR}
    where ProductId = #{productid,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.qingyun.mybatis.model.MbProduct">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update mb_product
    set ProductTitle = #{producttitle,jdbcType=VARCHAR},
      ProductState = #{productstate,jdbcType=INTEGER},
      ProductSort = #{productsort,jdbcType=INTEGER},
      ProductPic = #{productpic,jdbcType=VARCHAR},
      CreationTime = #{creationtime,jdbcType=TIMESTAMP},
      ProductRemarks = #{productremarks,jdbcType=VARCHAR},
      IsDel = #{isdel,jdbcType=SMALLINT},
      category_id = #{categoryId,jdbcType=BIGINT},
      key_word = #{keyWord,jdbcType=VARCHAR},
      description = #{description,jdbcType=VARCHAR}
    where ProductId = #{productid,jdbcType=BIGINT}
  </update>
  <select id="getProductListByHDPage" parameterType="map" resultType="com.qingyun.vo.manager.MbProductVo" flushCache="true">
      SELECT
    cc.category_name as categoryName,
          mp.*
      FROM
          mb_product as mp
    left join case_category as cc on mp.category_id = cc.category_id
    WHERE
          mp.IsDel = 0
          <if test="text !=null and text !=''">
            AND mp.ProductTitle = #{text}
          </if>
    <if test="categoryId !=null and categoryId !=''">
      and mp.category_id = #{categoryId}
    </if>
         ORDER BY ProductId DESC

  </select>
  <select id="getProduct" resultType="com.qingyun.mybatis.model.MbProduct">
    SELECT
    *
    FROM
      mb_product
    WHERE
      IsDel = 0 AND ProductState=0
    ORDER BY if(isnull(ProductSort),0,1) desc , ProductSort ASC, CreationTime DESC
  </select>

  <select id="getCaseDetail" parameterType="String" resultType="com.qingyun.vo.manager.MbProductVo">
    SELECT
    cc.category_name as categoryName,
          mp.*
      FROM
          mb_product as mp
    left join case_category as cc on mp.category_id = cc.category_id
    WHERE
          mp.IsDel = 0 and mp.ProductId = #{caseId}
  </select>
</mapper>