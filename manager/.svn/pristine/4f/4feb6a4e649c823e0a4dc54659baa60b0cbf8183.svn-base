{"remainingRequest":"E:\\qingyunjiudian\\manager\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\qingyunjiudian\\manager\\src\\views\\software\\software.vue?vue&type=style&index=0&lang=scss","dependencies":[{"path":"E:\\qingyunjiudian\\manager\\src\\views\\software\\software.vue","mtime":1571368376172},{"path":"E:\\qingyunjiudian\\manager\\node_modules\\css-loader\\index.js","mtime":1558690124086},{"path":"E:\\qingyunjiudian\\manager\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907989000},{"path":"E:\\qingyunjiudian\\manager\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\qingyunjiudian\\manager\\node_modules\\sass-loader\\lib\\loader.js","mtime":499162500000},{"path":"E:\\qingyunjiudian\\manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558690126701},{"path":"E:\\qingyunjiudian\\manager\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.introduction .textcontent .el-form-item{\n    border-top: 1px solid rgb(204, 204, 204);\n    padding-top: 30px;\n}\n.introduction {\n    width: 95%;\n    margin-left: 2%;\n}\n.introductionAddOrEditDialog .el-textarea__inner{\n    height: 80px;\n}\n.avatar-uploader .el-upload {\n    border: 1px dashed #409EFF;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n}\n/*avatar-uploader .el-upload--picture-card{*/\n/*    width: 320px !important;*/\n/*    height: 190px !important;*/\n/*}*/\n.introductionBackgroudurl .el-upload{\n    width: 334px;\n    height:  177.25px;\n}\n.introductionBackgroudurl img{\n    width: 334px;\n    height:  177.25px;\n}\n/*softwareqrcode .el-upload--picture-card{*/\n/*    width: 346px !important;*/\n/*    height: 67px !important;*/\n/*}*/\n\n\n\n.softwaretitlepic .el-upload{\n    width: 100px;\n    height: 160px;\n}\n.softwaretitlepic img{\n    width: 100px;\n    height: 160px;\n}\n.softwareqrcode .el-upload{\n    width: 160px;\n    height: 160px;\n}\n.softwareqrcode img{\n    width: 160px;\n    height: 160px;\n}\n.introductionBannerpic .el-upload-list__item{\n    width: 335.5px !important;\n    height: 168px!important;\n}\n.introductionBannerpic .el-upload {\n    width:  335.5px  !important;\n    height: 168px!important;\n}\n.introductionAddOrEditDialog .el-upload-list__item{\n    display: block !important;\n}\n.introductionAddOrEditDialog .el-dialog__footer{\n    padding: 0px 30px 20px !important;\n}\n.introductionAddOrEditDialog .el-dialog__body{\n    padding: 30px 20px 0px 20px !important;\n}\n",{"version":3,"sources":["software.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"software.vue","sourceRoot":"src\\views\\software","sourcesContent":["<template>\n    <div class=\"introduction\">\n        <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button type=\"primary\" @click=\"editSumbit\">编辑</el-button>\n        </span>\n        <el-form label-width=\"100px\" style=\"margin-top: 20px\" class=\"textcontent\">\n            <el-form-item label=\"标题:\" >\n                <div style=\"color: black;width: 60%\">{{softwarinfo.softwaretitle}}</div>\n            </el-form-item>\n            <el-form-item label=\"文字内容:\">\n                <span class=\"producttext\" style=\"display:block;width:60%;color: black\" v-html=\"softwarinfo.softwareremarks\"/>\n<!--                <div style=\"color: black;width: 60%\">{{softwarinfo.softwareremarks}} </div>-->\n            </el-form-item>\n            <el-form-item label=\"iphone地址:\">\n                <div style=\"color: black;width: 60%\">{{softwarinfo.iphoneaddress}} </div>\n            </el-form-item>\n            <el-form-item label=\"Android地址:\">\n                <div style=\"color: black;width: 60%\">{{softwarinfo.androidaddress}} </div>\n            </el-form-item>\n            <el-form-item label=\"背景图片:\">\n                <span v-if=\"softwarinfo.softwarepic!=null\">\n                    <img style=\"width: 334px;height:  177.25px;border-radius: 6px;\" :src=\"softwarinfo.softwarepic\">\n                </span>\n                <span v-else style=\"color: black\">暂无背景图片</span>\n            </el-form-item>\n            <el-form-item label=\"标题图片:\">\n                <span v-if=\"softwarinfo.titlepic!=null\">\n                    <img style=\"width: 100px;height:  160px;border-radius: 6px;\" :src=\"softwarinfo.titlepic\">\n                </span>\n                <span v-else style=\"color: black\">暂无标题图片</span>\n            </el-form-item>\n            <el-form-item label=\"二维码:\">\n                <span v-if=\"softwarinfo.qrcode!=null\">\n                    <img style=\"width: 160px;height: 160px;border-radius: 6px;\"  :src=\"softwarinfo.qrcode\"  >\n                </span>\n                <span v-else style=\"color: black\">暂无二维码图</span>\n            </el-form-item>\n        </el-form>\n        <!--新增/编辑弹框start--333s-->\n        <el-dialog\n            :title=\"dialogAddOrEditName\"\n            :visible.sync=\"dialogAddOrEdit\"\n            width=\"60%\"\n            :before-close=\"hideDialogAddOrEdit\"\n            class=\"introductionAddOrEditDialog\"\n            top=\"5vh\"\n        >\n            <el-form :model=\"formData\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm textcontentDialog\">\n                <el-form-item label=\"标题：\" prop=\"softwaretitle\" >\n                    <el-input type=\"text\" v-model=\"formData.softwaretitle\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"内容文字：\" prop=\"softwareremarks\" >\n<!--                    <el-input type=\"textarea\" maxlength=\"500\"  v-model=\"formData.softwareremarks\" ></el-input>-->\n                    <Tinymce ref=\"tinymce\" v-model=\"formData.softwareremarks\"></Tinymce>\n                </el-form-item>\n                <el-form-item label=\"iphone地址：\" prop=\"iphoneaddress\">\n                    <el-input type=\"text\" v-model=\"formData.iphoneaddress\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"Android地址：\" prop=\"androidaddress\">\n                    <el-input type=\"text\" v-model=\"formData.androidaddress\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"背景图片\" prop=\"softwarepic\" class=\"introductionBackgroudurl\">\n                    <el-upload\n                        class=\"avatar-uploader\"\n                        :action=\"uploaduri\"\n                        :on-success=\"handleBackgroudPicSuccess\"\n                        :before-upload=\"beforeAvatarUpload\"\n                        accept=\".png, .jpg, .gif, .jpeg, .bmp\"\n                        :show-file-list=\"false\"\n                    >\n                        <img v-if=\"formData.softwarepic\" :src=\"formData.softwarepic\"  >\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\" style=\"font-size: 26px;line-height: 6;\"></i>\n                    </el-upload>\n                    <span>注：上传图片尺寸宽为2732像素</span>\n                </el-form-item>\n                <el-form-item label=\"标题图片\" prop=\"titlepic\" class=\"softwaretitlepic\">\n                    <el-upload\n                        class=\"avatar-uploader\"\n                        :action=\"uploaduri\"\n                        :on-success=\"handleTitlePicSuccess\"\n                        :before-upload=\"beforeAvatarUpload\"\n                        :show-file-list=\"false\"\n                    >\n                        <img v-if=\"formData.titlepic\" :src=\"formData.titlepic\"  >\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\" style=\"font-size: 26px;line-height:5.5;\"></i>\n                    </el-upload>\n                    <span>注：上传图片尺寸为200*320像素</span>\n                </el-form-item>\n\n                <el-form-item label=\"二维码\" prop=\"qrcode\" class=\"softwareqrcode\">\n                    <el-upload\n                        class=\"avatar-uploader\"\n                        :action=\"uploaduri\"\n                        :on-success=\"handleQrcodePicSuccess\"\n                        :before-upload=\"beforeAvatarUpload\"\n                        :show-file-list=\"false\"\n                    >\n                        <img v-if=\"formData.qrcode\" :src=\"formData.qrcode\"  >\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\" style=\"font-size: 26px;line-height:5.5;\"></i>\n                    </el-upload>\n                    <span>注：上传图片尺寸为320*320像素</span>\n                </el-form-item>\n            </el-form>\n\n\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogAddOrEdit = false\">取 消</el-button>\n                <el-button type=\"primary\" :loading=\"formSumbitLoding\" @click=\"formSumbit\">提交</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n<script>\n    import {getMbSoftware,addOrEditSoftware} from \"../../api/software/software\";\n    import { BASE_URL } from \"../../config/app\";\n    import Tinymce from \"../../components/Tinymce/index\";\n    export default {\n        components: {Tinymce},\n        data() {\n            return {\n                softwarinfo:{},\n                bannerList:[],\n                uploaduri:BASE_URL+\"/tool/uploadpro\",\n                urls:\"\",\n                totalNumber: 0,//分页总页数\n                loading: false,//列表加载\n                allLoding: false,//全屏加载\n                formSumbitLoding: false,//表单提交加载\n                cancelToggle: false,//列表是否全选\n                dialogAddOrEdit: false,//新增或编辑弹框开关\n                dialogAddOrEditName: \"\",//新增或编辑弹框名字\n                formData: {},//新增或修改的对象\n                rules: {//表单校验\n                    // username: [\n                    //     {required: true, message: '请输入姓名', trigger: 'blur'},\n                    //     {min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur'}\n                    // ]\n                }\n            };\n        },\n        methods: {\n            handleBannerPicSuccess(res) {\n                console.info(res)\n                if(res.code==0){\n                    alert(res.message)\n                }else if(res.code==9){\n                    alert(res.message)\n                }else {\n                    let urls={\n                        url:res.data\n                    }\n                    this.urlList.push(urls)\n                }\n                console.info(this.urlList)\n            },\n            handleBannerPicRemove(file){\n                console.info(file)\n                for (var i = 0; i < this.urlList.length; i++) {\n                    if (this.urlList[i].url == file.url) {\n                        this.urlList.splice(i, 1);\n                    }\n                }\n                console.info(this.urlList)\n            },\n            /*背景图片上传*/\n            handleBackgroudPicSuccess(res) {\n                console.info(res)\n                if(res.code==0){\n                    alert(res.message)\n                }else if(res.code==9){\n                    alert(res.message)\n                }else {\n                    this.formData.softwarepic=res.data;\n                }\n            },\n            /*标题图片上传*/\n            handleTitlePicSuccess(res){\n                console.info(res)\n                if(res.code==0){\n                    alert(res.message)\n                }else if(res.code==9){\n                    alert(res.message)\n                }else {\n                    this.formData.titlepic=res.data;\n                }\n            },\n            handleQrcodePicSuccess(res){\n                console.info(res)\n                if(res.code==0){\n                    alert(res.message)\n                }else if(res.code==9){\n                    alert(res.message)\n                }else {\n                    this.formData.qrcode=res.data;\n                }\n            },\n\n            /*图片上传前操作*/\n            beforeAvatarUpload(file) {\n                const isJPG = file.type === 'image/jpeg';\n                const isGIF = file.type === 'image/gif';\n                const isPNG = file.type === 'image/png';\n                const isBMP = file.type === 'image/bmp';\n                const isLt2M = file.size / 1024 / 1024 < 2;\n\n                if (!isJPG && !isGIF && !isPNG && !isBMP) {\n                    this.$message.error('上传图片必须是JPG/GIF/PNG/BMP 格式!');\n                }\n                if (!isLt2M) {\n                    this.$message.error('上传图片大小不能超过 2MB!');\n                }\n                return (isJPG || isBMP || isGIF || isPNG) && isLt2M;\n            },\n            /*获取列表事件*/\n            getMbSoftware() {\n                this.loading = true;\n                getMbSoftware().then(response => {\n                    console.info(response)\n                    if (response.code != 0) {\n                        this.$message.error(response.message);\n                        this.loading = false;\n                        return false;\n                    }\n                    this.softwarinfo=response.data;\n                    // this.formData=response.data;\n                    setTimeout(() => {\n                        this.loading = false;\n                    }, 0.3 * 1000);\n                }).catch(() => {\n                    this.loading = false;\n                })\n            },\n            editSumbit(){\n                this.formData = Object.assign({}, this.softwarinfo)\n                this.dialogAddOrEdit = true;\n                console.info(this.formData)\n            },\n            /*新增或者编辑提交事件*/\n            formSumbit() {\n                //表单校验通过\n                this.$refs[\"ruleForm\"].validate(valid => {\n                    if (valid) {\n                        console.info(this.formData)\n                        this.formSumbitLoding = true;\n                        //提交操作\n                        addOrEditSoftware(this.formData).then(response =>{\n                            if (response.code) {\n                                this.$message.error(response.message);\n                                this.formSumbitLoding = false;\n                                return false;\n                            }\n                            setTimeout(() => {\n                                this.$message.success(\"提交成功\");\n                                this.formSumbitLoding = false;\n                                this.dialogAddOrEdit = false;\n                                this.getMbSoftware();\n                            }, 1000);\n                        }).catch(()=>{\n                            this.formSumbitLoding = false;\n                        })\n\n                    }\n                });\n                //new URLSearchParams(this.query)  提交数据格式不正确时可以转一下\n            },\n\n            /*显示 -新增或者编辑弹框*/\n            showDialogAddOrEdit(index, row) {\n                this.dialogAddOrEdit = true;\n                if (row !== null) {\n                    //如果row不为空，说明是修改，因为row是修改时携带过来此列的所有信息\n                    this.formData = Object.assign({}, row);//修改则将列内容深拷贝到表单内容中\n                    this.dialogAddOrEditName = \"编辑\";\n                } else {\n                    this.dialogAddOrEditName = \"新增\";\n                }\n            },\n\n            /*隐藏 -新增或编辑弹框*/\n            hideDialogAddOrEdit() {\n\n                //隐藏弹框时需要清除弹框内容\n                if (this.$refs[\"ruleForm\"]) {\n                    this.$refs['ruleForm'].resetFields();//清除formData表单\n                    this.$refs[\"ruleForm\"].clearValidate();//清除表单验证\n                }\n                this.dialogAddOrEdit = false;\n                //如果上传文件，还需要清除文件列表\n            },\n        },\n        created() {\n            this.getMbSoftware();\n        }\n    }\n    //跳转路由的方法\n    // this.$router.push({\n    //     path: \"\",\n    //     query:{\n    //         username:\"张三\"\n    //     }\n    // });\n    //接受路由传递的参数\n    //let query = this.$route.query;\n</script>\n<style type=\"text/scss\" lang=\"scss\">\n    .introduction .textcontent .el-form-item{\n        border-top: 1px solid rgb(204, 204, 204);\n        padding-top: 30px;\n    }\n    .introduction {\n        width: 95%;\n        margin-left: 2%;\n    }\n    .introductionAddOrEditDialog .el-textarea__inner{\n        height: 80px;\n    }\n    .avatar-uploader .el-upload {\n        border: 1px dashed #409EFF;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    /*avatar-uploader .el-upload--picture-card{*/\n    /*    width: 320px !important;*/\n    /*    height: 190px !important;*/\n    /*}*/\n    .introductionBackgroudurl .el-upload{\n        width: 334px;\n        height:  177.25px;\n    }\n    .introductionBackgroudurl img{\n        width: 334px;\n        height:  177.25px;\n    }\n    /*softwareqrcode .el-upload--picture-card{*/\n    /*    width: 346px !important;*/\n    /*    height: 67px !important;*/\n    /*}*/\n\n\n\n    .softwaretitlepic .el-upload{\n        width: 100px;\n        height: 160px;\n    }\n    .softwaretitlepic img{\n        width: 100px;\n        height: 160px;\n    }\n    .softwareqrcode .el-upload{\n        width: 160px;\n        height: 160px;\n    }\n    .softwareqrcode img{\n        width: 160px;\n        height: 160px;\n    }\n    .introductionBannerpic .el-upload-list__item{\n        width: 335.5px !important;\n        height: 168px!important;\n    }\n    .introductionBannerpic .el-upload {\n        width:  335.5px  !important;\n        height: 168px!important;\n    }\n    .introductionAddOrEditDialog .el-upload-list__item{\n        display: block !important;\n    }\n    .introductionAddOrEditDialog .el-dialog__footer{\n        padding: 0px 30px 20px !important;\n    }\n    .introductionAddOrEditDialog .el-dialog__body{\n        padding: 30px 20px 0px 20px !important;\n    }\n</style>\n"]}]}