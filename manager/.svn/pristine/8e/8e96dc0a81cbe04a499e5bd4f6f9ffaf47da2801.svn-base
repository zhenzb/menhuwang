{"remainingRequest":"E:\\mijia\\manager\\node_modules\\thread-loader\\dist\\cjs.js!E:\\mijia\\manager\\node_modules\\babel-loader\\lib\\index.js!E:\\mijia\\manager\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\mijia\\manager\\src\\views\\software\\software.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\mijia\\manager\\src\\views\\software\\software.vue","mtime":1562906391192},{"path":"E:\\mijia\\manager\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1558690126701},{"path":"E:\\mijia\\manager\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1558690128857},{"path":"E:\\mijia\\manager\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"E:\\mijia\\manager\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.assign\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getList as _getList, addOrEditSoftware, softwareDelOrSort } from \"../../api/software/software\";\nimport { BASE_URL } from \"../../config/app\";\n/*用作表单的数据初始化*/\n\nvar formJson = {\n  softwareid: \"\",\n  softwaretitle: \"\",\n  softwarestate: \"0\",\n  addressdisplay: \"1\",\n  softwarepic: \"sdafdsfsdfdsfsd\",\n  iphoneaddress: \"\",\n  windowsaddress: \"\",\n  androidaddress: \"\",\n  softwareremarks: \"\"\n};\nexport default {\n  data: function data() {\n    return {\n      uploaduri: BASE_URL + \"/tool/uploadpro\",\n      query: {\n        //查询条件\n        text: \"\",\n        currentPage: 1,\n        pageSize: 10\n      },\n      sortVisible: false,\n      dialogDetails: false,\n      softwareSort: \"\",\n      sortSumbitLoding: false,\n      createTime: [],\n      //选择日期时需要的model\n      list: [],\n      //列表集合\n      totalNumber: 0,\n      //分页总页数\n      loading: false,\n      //列表加载\n      allLoding: false,\n      //全屏加载\n      formSumbitLoding: false,\n      //表单提交加载\n      cancelToggle: false,\n      //列表是否全选\n      multipleSelection: [],\n      //多选集合\n      dialogAddOrEdit: false,\n      //新增或编辑弹框开关\n      dialogAddOrEditName: \"\",\n      //新增或编辑弹框名字\n      formData: formJson,\n      //新增或修改的对象\n      rules: {\n        //表单校验\n        softwaretitle: [{\n          required: true,\n          message: '请输入标题',\n          trigger: 'blur'\n        }],\n        softwareremarks: [{\n          required: true,\n          message: '请输入备注',\n          trigger: 'blur'\n        }],\n        // iphoneaddress: [\n        //     {required: true, message: '请输入iPhone地址', trigger: 'blur'}\n        // ],\n        // windowsaddress: [\n        //     {required: true, message: '请输入Windows地址', trigger: 'blur'}\n        // ],\n        // androidaddress: [\n        //     {required: true, message: '请输入Android地址', trigger: 'blur'}\n        //  ]\n        // ,\n        softwarepic: [{\n          required: true,\n          message: '请上传banner图',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    handleAvatarSuccess: function handleAvatarSuccess(res) {\n      console.info(res.data);\n\n      if (res.code == -1) {\n        alert(res.message);\n      } else if (res.code == 9) {\n        alert(res.message);\n      } else {\n        this.formData.softwarepic = res.data;\n      }\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isGIF = file.type === 'image/gif';\n      var isPNG = file.type === 'image/png';\n      var isBMP = file.type === 'image/bmp';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG && !isGIF && !isPNG && !isBMP) {\n        this.common.errorTip('上传图片必须是JPG/GIF/PNG/BMP 格式!');\n      }\n\n      if (!isLt2M) {\n        this.common.errorTip('上传图片大小不能超过 2MB!');\n      }\n\n      return (isJPG || isBMP || isGIF || isPNG) && isLt2M;\n    },\n\n    /*获取列表事件*/\n    getList: function getList() {\n      var _this = this;\n\n      this.loading = true;\n\n      _getList(this.query).then(function (response) {\n        console.info(response);\n\n        if (response.code != 0) {\n          _this.$message.error(response.message);\n\n          _this.loading = false;\n          return false;\n        }\n\n        _this.list = [];\n\n        if (response.data.list.length > 0) {\n          for (var i in response.data.list) {\n            response.data.list[i].number = (_this.query.currentPage - 1) * 10 + parseInt(i) + 1;\n\n            _this.list.push(response.data.list[i]);\n          }\n        }\n\n        _this.totalNumber = response.data.totalNumber || 0;\n        setTimeout(function () {\n          _this.loading = false;\n        }, 0.3 * 1000);\n      }).catch(function () {\n        _this.loading = false;\n        _this.list = [];\n      });\n    },\n\n    /*新增或者编辑提交事件*/\n    formSumbit: function formSumbit() {\n      var _this2 = this;\n\n      //表单校验通过\n      this.$refs[\"ruleForm\"].validate(function (valid) {\n        if (valid) {\n          if (_this2.formData.androidaddress == null || _this2.formData.androidaddress.length == 0) {\n            delete _this2.formData.androidaddress;\n          }\n\n          if (_this2.formData.windowsaddress == null || _this2.formData.windowsaddress.length == 0) {\n            delete _this2.formData.windowsaddress;\n          }\n\n          if (_this2.formData.iphoneaddress == null || _this2.formData.iphoneaddress.length == 0) {\n            delete _this2.formData.iphoneaddress;\n          }\n\n          _this2.formSumbitLoding = true;\n          addOrEditSoftware(_this2.formData).then(function (response) {\n            if (response.code) {\n              _this2.$message.error(response.message);\n\n              _this2.formSumbitLoding = false;\n              return false;\n            }\n\n            setTimeout(function () {\n              _this2.$message.success(\"提交成功\");\n\n              _this2.hideDialogAddOrEdit();\n\n              _this2.formSumbitLoding = false;\n\n              _this2.getList();\n            }, 1000); // 刷新表单\n            // this.$refs[\"ruleForm\"].resetFields();\n          });\n        }\n      }); //new URLSearchParams(this.query)  提交数据格式不正确时可以转一下\n    },\n    sortSumbit: function sortSumbit() {\n      var _this3 = this;\n\n      var ids = this.multipleSelection.map(function (item) {\n        return item.softwareid;\n      }).join();\n      this.loading = true;\n\n      if (this.softwareSort != \"\" && this.softwareSort.length > 0) {\n        var params = new URLSearchParams();\n        params.append(\"ids\", ids);\n        params.append(\"sort\", this.softwareSort);\n        softwareDelOrSort(params).then(function (response) {\n          _this3.loading = false;\n\n          if (response.code) {\n            _this3.$message.error(response.message);\n\n            return false;\n          }\n\n          _this3.$message.success(\"操作成功\");\n\n          _this3.sortVisible = false;\n          _this3.softwareSort = \"\"; //返回第一页\n\n          _this3.query.currentPage = 1; // 刷新数据\n\n          _this3.getList();\n        }).catch(function () {\n          _this3.loading = false;\n        });\n      } else {\n        this.$message({\n          message: \"排序值不可为空！\",\n          type: \"warning\"\n        });\n      }\n    },\n\n    /*列表查询条件事件*/\n    onSubmit: function onSubmit() {\n      this.query.currentPage = 1;\n      this.$router.push({\n        path: \"\",\n        query: this.query\n      });\n      this.getList();\n    },\n\n    /*刷新*/\n    onRest: function onRest() {\n      this.$router.push({\n        path: \"\"\n      }); //刷新事件需要重置查询条件\n\n      this.createTime = [];\n      this.query = {\n        currentPage: 1,\n        pageSize: 10\n      };\n      this.getList();\n    },\n\n    /*显示 -新增或者编辑弹框*/\n    showDialogAddOrEdit: function showDialogAddOrEdit(index, row) {\n      console.info(row);\n      this.formData = Object.assign({}, formJson); //将弹框内表单内容初始化\n\n      if (row !== null) {\n        //如果row不为空，说明是修改，因为row是修改时携带过来此列的所有信息\n        this.formData = Object.assign({}, row); //修改则将列内容深拷贝到表单内容中\n\n        this.formData.softwarestate += \"\";\n        this.formData.addressdisplay += \"\";\n        delete this.formData.creationtime;\n        delete this.formData.softwaresort;\n        this.dialogAddOrEditName = \"编辑\";\n      } else {\n        this.dialogAddOrEditName = \"新增\";\n      }\n\n      this.dialogAddOrEdit = true;\n    },\n    showDialogDetails: function showDialogDetails(index, row) {\n      this.formData = Object.assign({}, row); //修改则将列内容深拷贝到表单内容中\n\n      this.dialogAddOrEditName = \"查看\";\n      this.dialogDetails = true;\n    },\n\n    /*隐藏 -新增或编辑弹框*/\n    hideDialogAddOrEdit: function hideDialogAddOrEdit() {\n      this.dialogAddOrEdit = false;\n      this.dialogDetails = false; //隐藏弹框时需要清除弹框内容\n\n      if (this.$refs[\"ruleForm\"]) {\n        this.$refs['ruleForm'].resetFields(); //清除formData表单\n\n        this.$refs[\"ruleForm\"].clearValidate(); //清除表单验证\n      }\n    },\n    hideEditSort: function hideEditSort() {\n      this.sortVisible = false;\n      this.softwareSort = \"\";\n    },\n\n    /*点击页数*/\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.query.currentPage = val;\n      this.getList();\n    },\n\n    /*选择每页条数【10,20,30,40,50】*/\n    handleSizeChange: function handleSizeChange(val) {\n      this.query.pageSize = val;\n      this.getList();\n    },\n\n    /*取消全选事件*/\n    toggleSelection: function toggleSelection(rows) {\n      var _this4 = this;\n\n      if (rows) {\n        rows.forEach(function (row) {\n          _this4.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n\n    /*列表复选框选择事件*/\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n\n      if (val == \"\") {\n        this.cancelToggle = false;\n        return;\n      }\n\n      this.cancelToggle = true;\n    },\n\n    /*全选删除事件*/\n    delGroup: function delGroup() {\n      console.log(this.multipleSelection);\n      var ids = this.multipleSelection.map(function (item) {\n        return item.softwareid;\n      }).join(); //获取所有选中行的id组成的字符串，以逗号分隔\n\n      if (ids == \"\") {\n        this.$message({\n          message: \"请先选择\",\n          type: \"warning\"\n        });\n        return;\n      }\n\n      this.handleDel(ids);\n    },\n\n    /*单击删除事件*/\n    handleDel: function handleDel(ids) {\n      var _this5 = this;\n\n      if (ids) {\n        this.$confirm(\"确认要删除吗?\", \"提示\", {\n          type: \"warning\"\n        }).then(function () {\n          _this5.loading = true;\n          var params = new URLSearchParams();\n          params.append(\"ids\", ids);\n          softwareDelOrSort(params).then(function (response) {\n            _this5.loading = false;\n\n            if (response.code) {\n              _this5.$message.error(response.message);\n\n              return false;\n            }\n\n            _this5.$message.success(\"删除成功\"); //返回第一页\n\n\n            _this5.query.currentPage = 1; // 刷新数据\n\n            _this5.getList();\n          }).catch(function () {\n            _this5.loading = false;\n          });\n        }).catch(function () {\n          _this5.$message.warning(\"已取消\");\n        });\n      }\n    },\n    sortGroup: function sortGroup() {\n      console.log(this.multipleSelection);\n      var ids = this.multipleSelection.map(function (item) {\n        return item.softwareid;\n      }).join(); //获取所有选中行的id组成的字符串，以逗号分隔\n\n      if (ids == \"\") {\n        this.$message({\n          message: \"请先选择\",\n          type: \"warning\"\n        });\n        return;\n      }\n\n      this.sortVisible = true;\n    },\n\n    /*日期选择事件*/\n    dateChange: function dateChange(val) {\n      if (val == null) {\n        this.query.startTime = \"\";\n        this.query.endTime = \"\";\n      } else {\n        this.query.startTime = val[0];\n        this.query.endTime = val[1];\n        this.query.currentPage = 1;\n      }\n\n      this.getList();\n      console.log(this.query);\n    }\n  },\n  created: function created() {\n    this.getList();\n  }\n}; //跳转路由的方法\n// this.$router.push({\n//     path: \"\",\n//     query:{\n//         username:\"张三\"\n//     }\n// });\n//接受路由传递的参数\n//let query = this.$route.query;",{"version":3,"sources":["software.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div style=\"width: 95%; margin-left: 2%;\">\n        <!--查询条件start --111s-->\n        <el-form :inline=\"true\" :model=\"query\" class=\"query-form\" size=\"small\">\n            <el-form-item class=\"query-form-item\">\n                <el-input\n                    v-model=\"query.text\"\n                    placeholder=\"请输入关键字\"\n                    prefix-icon=\"el-icon-search\"\n                    @keyup.enter.native=\"onSubmit\"\n                    clearable\n                ></el-input>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" icon=\"el-icon-refresh\" @click=\"onRest\">刷新</el-button>\n                <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"onSubmit\">查询</el-button>\n                <el-button type=\"primary\" icon=\"el-icon-edit\" @click.native=\"showDialogAddOrEdit(null,null)\">添加</el-button>\n                <el-button type=\"primary\" icon=\"el-icon-sort\" @click=\"sortGroup\">变更排序</el-button>\n            </el-form-item>\n        </el-form>\n        <!--查询条件end --111e-->\n\n        <!--列表start --222s-->\n        <el-table\n            ref=\"multipleTable\"\n            v-loading=\"loading\"\n            :data=\"list\"\n            :header-cell-style=\"{background:'#F4F4F5',color:'#606266'}\"\n            @selection-change=\"handleSelectionChange\"\n            border\n        >\n            <el-table-column type=\"selection\" width=\"50\" fixed align=\"center\"/>\n            <el-table-column label=\"编号\" prop=\"number\" width=\"50\" align=\"center\"/>\n            <el-table-column label=\"标题\" prop=\"softwaretitle\" align=\"left\" :show-overflow-tooltip=\"true\" />\n            <el-table-column label=\"状态\" prop=\"softwarestate\" align=\"center\" width=\"80\">\n                <template slot-scope=\"scope\">\n                    <span\n                        v-if=\"scope.row.softwarestate==0\"\n                    >显示</span>\n                    <span v-else>隐藏</span>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"排序值\" align=\"center\" width=\"80\">\n                <template slot-scope=\"scope\">\n                    <span\n                        v-if=\"scope.row.softwaresort!=null\"\n                    >{{ scope.row.softwaresort}}</span>\n                    <span v-else>-</span>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"创建时间\" with=\"300\" :show-overflow-tooltip=\"true\" align=\"center\">\n                <template slot-scope=\"scope\">\n                    <i class=\"el-icon-time\" v-if=\"scope.row.creationtime!=null\"></i>\n                    <span\n                        v-if=\"scope.row.creationtime!=null\"\n                    >{{ scope.row.creationtime | formatDateStr('yyyy-MM-dd hh:mm:ss') }}</span>\n                    <span v-else>-</span>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"备注\" prop=\"softwareremarks\" align=\"left\" :show-overflow-tooltip=\"true\"/>\n            <el-table-column label=\"操作\" align=\"center\" width=\"210\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"primary\" size=\"mini\"  @click.native=\"showDialogDetails(scope.$index, scope.row)\" >查看 </el-button>\n                    <el-button  type=\"primary\" size=\"mini\" @click.native=\"showDialogAddOrEdit(scope.$index, scope.row)\"  >编辑 </el-button>\n                    <el-button type=\"danger\" size=\"mini\" @click.native=\"handleDel(scope.row.softwareid)\" >删除 </el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n        <!--列表end --222e-->\n\n        <!--全选删除start-->\n        <div class=\"left-container\">\n            <el-button type=\"danger\" size=\"small\" @click=\"delGroup()\">删除已选</el-button>\n            <transition name=\"el-fade-in-linear\">\n                <el-button size=\"small\" @click=\"toggleSelection()\" v-show=\"cancelToggle\">取消选择</el-button>\n            </transition>\n        </div>\n        <!--全选删除end-->\n\n        <!--分页模块start-->\n        <el-pagination\n            class=\"pagination-container\"\n            background\n            :page-size=\"query.pageSize\"\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n            layout=\"total,sizes,prev, pager, next, jumper\"\n            :current-page=\"query.currentPage\"\n            :page-sizes=\"[10, 20, 30, 50]\"\n            :total=\"totalNumber\"\n        ></el-pagination>\n        <!--分页模块end-->\n        <!-- 查看 -->\n        <el-dialog\n            class=\"advantageDialog\"\n            :title=\"dialogAddOrEditName\"\n            :visible.sync=\"dialogDetails\"\n            width=\"50%\"\n            top=\"5vh\"\n            :before-close=\"hideDialogAddOrEdit\">\n            <el-form label-width=\"100px\">\n                <el-form-item label=\"标题名称:\">\n                    <el-input v-model=\"formData.softwaretitle\" style=\"width: 60%\" readonly=\"readonly\"></el-input>\n                    <span style=\"margin-left: 26px;\">是否显示:\n                        <span v-if=\"formData.softwarestate==0\">\n                            是\n                         </span>\n                        <span v-else>\n                            否\n                        </span>\n                    </span>\n                </el-form-item>\n                <el-form-item label=\"备注信息:\">\n                    <el-input v-model=\"formData.softwareremarks\"  readonly=\"readonly\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"iPhone地址\" v-if=\"formData.addressdisplay==0\">\n                    <el-input v-model=\"formData.iphoneaddress\" readonly=\"readonly\" ></el-input>\n                </el-form-item>\n                <el-form-item  label=\"Android地址\" v-if=\"formData.addressdisplay==0\">\n                    <el-input v-model=\"formData.androidaddress\" readonly=\"readonly\" ></el-input>\n                </el-form-item>\n                <el-form-item  label=\"Windows地址\" v-if=\"formData.addressdisplay==0\">\n                    <el-input v-model=\"formData.windowsaddress\"  readonly=\"readonly\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"banner图片\" prop=\"softwarepic\">\n                    <span v-if=\"formData.softwarepic!=null\">\n                        <img style=\"width: 341.5px;height:177.25px;border-radius: 6px;\" :src=\"formData.softwarepic\">\n                     </span>\n                    <span v-else style=\"color: black\">暂无背景图片</span>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer advantagebtn\">\n                <el-button @click=\"hideDialogAddOrEdit\">取 消</el-button>\n            </span>\n        </el-dialog>\n        <!--新增/编辑弹框start--333s-->\n        <el-dialog\n            :title=\"dialogAddOrEditName\"\n            :visible.sync=\"dialogAddOrEdit\"\n            width=\"50%\"\n            :before-close=\"hideDialogAddOrEdit\"\n            class=\"softwareAddOrEdit\"\n            top=\"5vh\"\n        >\n            <el-form :model=\"formData\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"110px\" class=\"demo-ruleForm\">\n                <el-form-item label=\"标题名称\" prop=\"softwaretitle\" >\n                    <el-input v-model=\"formData.softwaretitle\" style=\"width: 70%\"></el-input>\n                    <span style=\"margin-left: 26px;\">是否显示</span>\n                    <template>\n                        <el-radio v-model=\"formData.softwarestate\" label=\"0\" style=\"margin-left: 26px;\">是</el-radio>\n                        <el-radio v-model=\"formData.softwarestate\" label=\"1\">否</el-radio>\n                    </template>\n                </el-form-item>\n                <el-form-item label=\"备注信息\" prop=\"softwareremarks\">\n                    <el-input v-model=\"formData.softwareremarks\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"更多内容\" >\n                    <template>\n                        <el-radio v-model=\"formData.addressdisplay\" label=\"0\" style=\"margin-left: 26px;\">是</el-radio>\n                        <el-radio v-model=\"formData.addressdisplay\" label=\"1\">否</el-radio>\n                    </template>\n                </el-form-item>\n                <el-form-item v-if=\"formData.addressdisplay==0\" label=\"iPhone地址\" prop=\"iphoneaddress\">\n                    <el-input v-model=\"formData.iphoneaddress\" ></el-input>\n                </el-form-item>\n                <el-form-item v-if=\"formData.addressdisplay==0\" label=\"Android地址\" prop=\"androidaddress\">\n                    <el-input v-model=\"formData.androidaddress\" ></el-input>\n                </el-form-item>\n                <el-form-item v-if=\"formData.addressdisplay==0\" label=\"Windows地址\" prop=\"windowsaddress\">\n                    <el-input v-model=\"formData.windowsaddress\" ></el-input>\n                </el-form-item>\n                <el-form-item label=\"banner图片\" prop=\"softwarepic\" class=\"softwareBanner\">\n                    <el-upload\n                        class=\"avatar-uploader\"\n                        :action=\"uploaduri\"\n                        :on-success=\"handleAvatarSuccess\"\n                        :before-upload=\"beforeAvatarUpload\"\n                        :show-file-list=\"false\"\n\n                    >\n                        <img v-if=\"formData.softwarepic\" :src=\"formData.softwarepic\"  >\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\" style=\"font-size: 26px;line-height: 6;\"></i>\n                    </el-upload>\n                    <span>注：上传图片尺寸为2732*1418像素</span>\n                </el-form-item>\n            </el-form>\n\n            <span slot=\"footer\" class=\"dialog-footer advantagebtn\">\n                <el-button @click=\"dialogAddOrEdit = false\">取 消</el-button>\n                <el-button type=\"primary\" :loading=\"formSumbitLoding\" @click=\"formSumbit\">提交</el-button>\n            </span>\n        </el-dialog>\n        <!--新增/编辑弹框end--333e-->\n\n        <el-dialog\n            :visible.sync=\"sortVisible\"\n            width=\"15%\"\n            :before-close=\"hideEditSort\"\n            class=\"softwareSort\"\n            top=\"15vh\"\n        >\n            <div style=\" font-size: 28px; text-align: center; margin-bottom: 13px;\">请输入排序值</div>\n            <el-form class=\"demo-ruleForm\">\n                <el-form-item>\n                    <el-input v-model=\"softwareSort\" ></el-input>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"hideEditSort\">取 消</el-button>\n                <el-button type=\"primary\" :loading=\"sortSumbitLoding\" @click=\"sortSumbit\">提交</el-button>\n            </span>\n        </el-dialog>\n\n\n    </div>\n</template>\n<script>\n    import {getList,addOrEditSoftware,softwareDelOrSort} from \"../../api/software/software\";\n    import { BASE_URL } from \"../../config/app\";\n\n    /*用作表单的数据初始化*/\n    const formJson = {\n        softwareid:\"\",\n        softwaretitle:\"\",\n        softwarestate:\"0\",\n        addressdisplay:\"1\",\n        softwarepic:\"sdafdsfsdfdsfsd\",\n        iphoneaddress:\"\",\n        windowsaddress:\"\",\n        androidaddress:\"\",\n        softwareremarks:\"\"\n    };\n\n    export default {\n        data() {\n            return {\n                uploaduri:BASE_URL+\"/tool/uploadpro\",\n                query: {//查询条件\n                    text:\"\",\n                    currentPage: 1,\n                    pageSize: 10,\n                },\n                sortVisible:false,\n                dialogDetails:false,\n                softwareSort:\"\",\n                sortSumbitLoding:false,\n                createTime:[],//选择日期时需要的model\n                list: [],//列表集合\n                totalNumber: 0,//分页总页数\n                loading: false,//列表加载\n                allLoding: false,//全屏加载\n                formSumbitLoding: false,//表单提交加载\n                cancelToggle: false,//列表是否全选\n                multipleSelection: [], //多选集合\n                dialogAddOrEdit: false,//新增或编辑弹框开关\n                dialogAddOrEditName: \"\",//新增或编辑弹框名字\n                formData: formJson,//新增或修改的对象\n                rules: {//表单校验\n                    softwaretitle: [\n                        {required: true, message: '请输入标题', trigger: 'blur'}\n                    ],\n                    softwareremarks: [\n                        {required: true, message: '请输入备注', trigger: 'blur'}\n                    ],\n                    // iphoneaddress: [\n                    //     {required: true, message: '请输入iPhone地址', trigger: 'blur'}\n                    // ],\n                    // windowsaddress: [\n                    //     {required: true, message: '请输入Windows地址', trigger: 'blur'}\n                    // ],\n                    // androidaddress: [\n                    //     {required: true, message: '请输入Android地址', trigger: 'blur'}\n                    //  ]\n                    // ,\n                    softwarepic: [\n                        {required: true, message: '请上传banner图', trigger: 'blur'}\n                    ]\n                }\n            };\n        },\n        methods: {\n            handleAvatarSuccess(res) {\n                console.info(res.data)\n                if(res.code==-1){\n                    alert(res.message)\n                }else if(res.code==9){\n                    alert(res.message)\n                }else {\n                    this.formData.softwarepic = res.data;\n                }\n            },\n            beforeAvatarUpload(file) {\n                const isJPG = file.type === 'image/jpeg';\n                const isGIF = file.type === 'image/gif';\n                const isPNG = file.type === 'image/png';\n                const isBMP = file.type === 'image/bmp';\n                const isLt2M = file.size / 1024 / 1024 < 2;\n\n                if (!isJPG && !isGIF && !isPNG && !isBMP) {\n                    this.common.errorTip('上传图片必须是JPG/GIF/PNG/BMP 格式!');\n                }\n                if (!isLt2M) {\n                    this.common.errorTip('上传图片大小不能超过 2MB!');\n                }\n                return (isJPG || isBMP || isGIF || isPNG) && isLt2M;\n            },\n            /*获取列表事件*/\n            getList() {\n\n                this.loading = true;\n                getList(this.query).then(response => {\n                    console.info(response)\n                    if (response.code != 0) {\n                        this.$message.error(response.message);\n                        this.loading = false;\n                        return false;\n                    }\n                    this.list =  [];\n                    if(response.data.list.length>0){\n                        for(var i in response.data.list){\n                            response.data.list[i].number=(this.query.currentPage-1)*10+parseInt(i)+1;\n                            this.list.push(response.data.list[i])\n                        }\n                    }\n                    this.totalNumber = response.data.totalNumber || 0;\n                    setTimeout(() => {\n                        this.loading = false;\n                    }, 0.3 * 1000);\n                }).catch(() => {\n                    this.loading = false;\n                    this.list = [];\n                })\n            },\n\n            /*新增或者编辑提交事件*/\n            formSumbit() {\n                //表单校验通过\n                this.$refs[\"ruleForm\"].validate(valid => {\n                    if (valid) {\n                        if(this.formData.androidaddress==null||this.formData.androidaddress.length==0){\n                            delete this.formData.androidaddress\n                        }\n                        if(this.formData.windowsaddress==null||this.formData.windowsaddress.length==0){\n                            delete this.formData.windowsaddress\n                        }\n                        if(this.formData.iphoneaddress==null||this.formData.iphoneaddress.length==0){\n                            delete this.formData.iphoneaddress\n                        }\n                        this.formSumbitLoding = true;\n                        addOrEditSoftware(this.formData).then(response => {\n                            if (response.code) {\n                                this.$message.error(response.message);\n                                this.formSumbitLoding = false;\n                                return false;\n                            }\n                            setTimeout(() => {\n                                this.$message.success(\"提交成功\");\n                                this.hideDialogAddOrEdit();\n                                this.formSumbitLoding = false;\n                                this.getList();\n                            }, 1000);\n                            // 刷新表单\n                            // this.$refs[\"ruleForm\"].resetFields();\n                        });\n                    }\n                });\n                //new URLSearchParams(this.query)  提交数据格式不正确时可以转一下\n            },\n            sortSumbit(){\n                var ids = this.multipleSelection.map(item => item.softwareid).join();\n                this.loading = true;\n                if(this.softwareSort!=\"\" && this.softwareSort.length>0){\n                    var params = new URLSearchParams();\n                    params.append(\"ids\", ids);\n                    params.append(\"sort\",this.softwareSort);\n                    softwareDelOrSort(params)\n                        .then(response => {\n                            this.loading = false;\n                            if (response.code) {\n                                this.$message.error(response.message);\n                                return false;\n                            }\n                            this.$message.success(\"操作成功\");\n                            this.sortVisible=false;\n                            this.softwareSort=\"\";\n                            //返回第一页\n                            this.query.currentPage = 1;\n                            // 刷新数据\n                            this.getList();\n                        })\n                        .catch(() => {\n                            this.loading = false;\n                        });\n                }else {\n                    this.$message({ message: \"排序值不可为空！\",type: \"warning\"});\n                }\n\n            },\n            /*列表查询条件事件*/\n            onSubmit() {\n                this.query.currentPage = 1;\n                this.$router.push({\n                    path: \"\",\n                    query: this.query\n                });\n                this.getList();\n            },\n\n            /*刷新*/\n            onRest() {\n                this.$router.push({\n                    path: \"\"\n                });\n                //刷新事件需要重置查询条件\n                this.createTime = [];\n                this.query = {\n                    currentPage: 1,\n                    pageSize: 10,\n                };\n                this.getList();\n            },\n\n            /*显示 -新增或者编辑弹框*/\n            showDialogAddOrEdit(index, row) {\n                console.info(row)\n                this.formData = Object.assign({}, formJson);//将弹框内表单内容初始化\n                if (row !== null) {\n                    //如果row不为空，说明是修改，因为row是修改时携带过来此列的所有信息\n                    this.formData = Object.assign({}, row);//修改则将列内容深拷贝到表单内容中\n                    this.formData.softwarestate+=\"\";\n                    this.formData.addressdisplay+=\"\";\n\n                    delete this.formData.creationtime;\n                    delete this.formData.softwaresort;\n                    this.dialogAddOrEditName = \"编辑\";\n                } else {\n                    this.dialogAddOrEditName = \"新增\";\n                }\n                this.dialogAddOrEdit = true;\n            },\n            showDialogDetails(index, row){\n                this.formData = Object.assign({}, row);//修改则将列内容深拷贝到表单内容中\n                this.dialogAddOrEditName = \"查看\";\n                this.dialogDetails = true;\n            },\n            /*隐藏 -新增或编辑弹框*/\n            hideDialogAddOrEdit() {\n                this.dialogAddOrEdit = false;\n                this.dialogDetails =false;\n                //隐藏弹框时需要清除弹框内容\n                if (this.$refs[\"ruleForm\"]) {\n                    this.$refs['ruleForm'].resetFields();//清除formData表单\n                    this.$refs[\"ruleForm\"].clearValidate();//清除表单验证\n                }\n            },\n            hideEditSort(){\n                this.sortVisible=false;\n                this.softwareSort=\"\";\n            },\n            /*点击页数*/\n            handleCurrentChange(val) {\n                this.query.currentPage = val;\n                this.getList();\n            },\n\n            /*选择每页条数【10,20,30,40,50】*/\n            handleSizeChange(val) {\n                this.query.pageSize = val;\n                this.getList();\n            },\n\n            /*取消全选事件*/\n            toggleSelection(rows) {\n                if (rows) {\n                    rows.forEach(row => {\n                        this.$refs.multipleTable.toggleRowSelection(row);\n                    });\n                } else {\n                    this.$refs.multipleTable.clearSelection();\n                }\n            },\n\n            /*列表复选框选择事件*/\n            handleSelectionChange(val) {\n                this.multipleSelection = val;\n                if (val == \"\") {\n                    this.cancelToggle = false;\n                    return;\n                }\n                this.cancelToggle = true;\n            },\n\n            /*全选删除事件*/\n            delGroup() {\n                console.log(this.multipleSelection)\n                var ids = this.multipleSelection.map(item => item.softwareid).join(); //获取所有选中行的id组成的字符串，以逗号分隔\n                if (ids == \"\") {\n                    this.$message({\n                        message: \"请先选择\",\n                        type: \"warning\"\n                    });\n                    return;\n                }\n                this.handleDel(ids);\n            },\n            /*单击删除事件*/\n            handleDel(ids) {\n                if (ids) {\n                    this.$confirm(\"确认要删除吗?\", \"提示\", {\n                        type: \"warning\"\n                    })\n                        .then(() => {\n                            this.loading = true;\n                            var params = new URLSearchParams();\n                            params.append(\"ids\", ids);\n                            softwareDelOrSort(params)\n                                .then(response => {\n                                    this.loading = false;\n                                    if (response.code) {\n                                        this.$message.error(response.message);\n                                        return false;\n                                    }\n                                    this.$message.success(\"删除成功\");\n                                    //返回第一页\n                                    this.query.currentPage = 1;\n                                    // 刷新数据\n                                    this.getList();\n                                })\n                                .catch(() => {\n                                    this.loading = false;\n                                });\n                        })\n                        .catch(() => {\n                            this.$message.warning(\"已取消\");\n                        });\n                }\n            },\n            sortGroup() {\n                console.log(this.multipleSelection)\n                var ids = this.multipleSelection.map(item => item.softwareid).join(); //获取所有选中行的id组成的字符串，以逗号分隔\n                if (ids == \"\") {\n                    this.$message({\n                        message: \"请先选择\",\n                        type: \"warning\"\n                    });\n                    return;\n                }\n                 this.sortVisible=true;\n            },\n            /*日期选择事件*/\n            dateChange(val) {\n                if (val == null) {\n                    this.query.startTime = \"\";\n                    this.query.endTime = \"\";\n                } else {\n                    this.query.startTime = val[0];\n                    this.query.endTime = val[1];\n                    this.query.currentPage = 1;\n                }\n                this.getList();\n                console.log(this.query)\n            },\n        }, created() {\n            this.getList();\n        }\n    }\n    //跳转路由的方法\n    // this.$router.push({\n    //     path: \"\",\n    //     query:{\n    //         username:\"张三\"\n    //     }\n    // });\n    //接受路由传递的参数\n    //let query = this.$route.query;\n</script>\n<style type=\"text/scss\" lang=\"scss\" >\n    .softwareAddOrEdit el-radio+.el-radio {\n        margin-left: 20px !important;\n    }\n    /*.softwareAddOrEdit .el-form-item__label{*/\n    /*    width: 110px !important;*/\n    /*}*/\n    .avatar-uploader .el-upload {\n        border: 1px dashed #409EFF;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    /*avatar-uploader .el-upload--picture-card{*/\n    /*    width: 341.5px !important;*/\n    /*    height: 177.25px !important;*/\n    /*}*/\n    /*.el-upload{*/\n    /*    width: 341.5px;*/\n    /*    height: 177.25px;*/\n    /*}*/\n    .softwareBanner .el-upload{\n        width: 334px;\n        height:  177.25px;\n    }\n    .softwareBanner img{\n        width: 334px;\n        height:  177.25px;\n    }\n    .softwareAddOrEdit .el-dialog__footer{\n        padding: 0px 20px 20px !important;\n    }\n    .softwareAddOrEdit .el-dialog__body{\n        padding: 30px 20px 0px 20px !important;\n    }\n    .el-table th>.cell {\n        text-align: center!important;\n    }\n</style>\n"],"sourceRoot":"src\\views\\software"}]}